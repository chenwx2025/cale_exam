# 📚 知识点详解功能设计文档

## 功能概述

知识点详解页面为考生提供了系统化、结构化的考试内容学习资源，帮助考生全面掌握考试要点。

## 文件结构

```
cale_exam/
├── pages/
│   └── knowledge-points.vue              # 知识点详解主页面
├── server/api/knowledge-points/
│   ├── list.get.ts                       # 获取知识点列表API
│   └── stats.get.ts                      # 获取知识点统计API
├── scripts/
│   └── update-knowledge-points.ts        # 更新知识点数据脚本
└── layouts/
    └── exam.vue                          # 添加了导航菜单入口
```

## 页面设计

### 1. 布局结构

```
┌─────────────────────────────────────────────────────────┐
│  📚 考试知识点详解                                        │
│  全面掌握考试要点，高效备考                                │
├─────────────────────────────────────────────────────────┤
│  🔍 [搜索知识点...]                                      │
├─────────────┬───────────────────────────────────────────┤
│ 📑 知识点分类 │  知识点详细内容                            │
│             │                                           │
│ ☑ 評估病人    │  ┌──────────────────────────────────┐  │
│   20题•30%   │  │ 評估病人                          │  │
│             │  │ Assessment    30%考试占比         │  │
│ □ 診斷和治療  │  └──────────────────────────────────┘  │
│   15题•25%   │                                       │
│             │  📋 详细说明                           │
│ □ ...       │  本部分涵盖中医诊断的基本方法...        │
│             │                                       │
│ 统计信息：    │  ⭐ 核心知识要点                       │
│ 总知识点: 5  │  ▶ 1. 四诊合参                        │
│ 总题数: 100  │  ▶ 2. 舌诊要点                        │
│             │  ▼ 3. 脉诊技巧 (展开)                  │
│             │     通过触摸桡动脉来判断气血运行...      │
│             │     💡 示例：                          │
│             │        • 浮脉：轻取即得，主表证         │
│             │        • 沉脉：重按始得，主里证         │
│             │                                       │
│             │  💡 学习建议                           │
│             │  评估与诊断是中医临床的基础...          │
│             │                                       │
│             │  📊 练习统计                           │
│             │  [20题] [8已掌握] [12错题]             │
│             │  [📝 开始练习] [❌ 查看错题(12)]       │
└─────────────┴───────────────────────────────────────────┘
```

### 2. 核心功能

#### 2.1 知识点分类导航
- ✅ 左侧显示所有知识点分类
- ✅ 显示每个分类的题目数量和考试占比
- ✅ 点击切换选中的知识点
- ✅ 高亮当前选中的分类

#### 2.2 知识点详细内容
- ✅ 标题卡片：显示知识点名称、英文名称、考试占比
- ✅ 详细说明：知识点的概述和重要性
- ✅ 核心要点：可展开折叠的知识要点列表
  - 每个要点包含：标题、详细描述、示例
  - 支持单独展开/折叠每个要点
- ✅ 学习建议：针对性的学习策略和技巧
- ✅ 练习统计：显示该知识点的练习情况

#### 2.3 快速操作
- ✅ **开始练习**：直接进入该知识点的题目练习
- ✅ **查看错题**：查看该知识点下的所有错题

#### 2.4 搜索功能
- ✅ 支持按知识点名称搜索
- ✅ 支持按英文名称搜索
- ✅ 支持按描述内容搜索

## 数据结构

### Category 表字段
```typescript
{
  id: string              // ID
  name: string            // 知识点名称（中文）
  nameEn: string         // 知识点名称（英文）
  code: string           // 分类代码
  examType: string       // 考试类型 (cale/nccaom)
  type: string           // 类型 (content/organization/review)
  description: string    // 描述
  detailedInfo: string   // 详细信息
  weight: number         // 考试占比(%)
  questionCount: number  // 题目数量
  keyPoints: string      // 核心要点(JSON)
  studyTips: string      // 学习建议
}
```

### 核心要点 JSON 结构
```json
[
  {
    "title": "四诊合参",
    "description": "综合运用望、闻、问、切四种诊断方法...",
    "examples": [
      "望诊：观察患者面色、舌象、神态等",
      "闻诊：听患者声音、嗅其气味",
      "..."
    ]
  }
]
```

## API 接口

### 1. GET /api/knowledge-points/list
获取知识点列表

**请求参数：**
```typescript
{
  examType: 'cale' | 'nccaom'
}
```

**响应数据：**
```typescript
{
  success: true,
  data: [
    {
      id: string
      name: string
      nameEn: string
      code: string
      description: string
      detailedInfo: string
      weight: number
      questionCount: number
      keyPoints: string  // JSON
      studyTips: string
    }
  ]
}
```

### 2. GET /api/knowledge-points/stats
获取知识点练习统计

**请求参数：**
```typescript
{
  categoryId: string
  examType: 'cale' | 'nccaom'
}
```

**响应数据：**
```typescript
{
  success: true,
  data: {
    total: number      // 总题数
    correct: number    // 已掌握题数
    wrong: number      // 错题数
  }
}
```

## 数据初始化

### 运行更新脚本
```bash
npx tsx scripts/update-knowledge-points.ts
```

脚本会为CALE考试的所有分类添加：
- ✅ 核心知识要点（keyPoints）
- ✅ 学习建议（studyTips）
- ✅ 详细信息（detailedInfo）

### 已添加的知识点内容

#### Domain 1: 評估病人 (Assessment)
- 四诊合参
- 舌诊要点
- 脉诊技巧
- 辨证论治基础

#### Domain 2: 診斷和治療計劃 (Diagnosis)
- 中医病名诊断
- 證型辨別
- 西医诊断基础

#### Domain 3-5
脚本已准备好数据，如需添加可在数据库中创建对应分类后重新运行脚本。

## 导航集成

在 `layouts/exam.vue` 的侧边栏菜单中添加了"知识点详解"入口：

```vue
<NuxtLink to="/knowledge-points" class="nav-item">
  <svg>...</svg>
  <span>知识点详解</span>
</NuxtLink>
```

位置：在"考试大纲"和"模拟考试"之间

## 使用流程

1. **进入页面**：从侧边栏点击"知识点详解"
2. **选择知识点**：左侧点击感兴趣的知识点分类
3. **学习内容**：
   - 阅读知识点概述
   - 展开核心要点，逐个学习
   - 查看示例加深理解
   - 参考学习建议制定学习计划
4. **练习巩固**：
   - 点击"开始练习"做该知识点的题目
   - 或点击"查看错题"复习错题
5. **追踪进度**：通过练习统计了解掌握情况

## 技术特点

### 1. 响应式设计
- ✅ 移动端适配（手机、平板）
- ✅ 桌面端大屏优化

### 2. 交互优化
- ✅ 平滑的展开/折叠动画
- ✅ 高亮选中状态
- ✅ Hover效果增强体验

### 3. 性能优化
- ✅ 按需加载统计数据
- ✅ 搜索实时过滤
- ✅ 合理的数据缓存

### 4. 用户体验
- ✅ 清晰的信息层级
- ✅ 直观的操作流程
- ✅ 贴心的学习建议

## 未来扩展

### 1. AI 助手
- 💡 基于知识点生成学习计划
- 💡 智能推荐薄弱知识点
- 💡 AI 答疑解惑

### 2. 学习笔记
- 💡 支持在知识点下添加个人笔记
- 💡 笔记标签和搜索
- 💡 笔记分享和讨论

### 3. 视频讲解
- 💡 为每个知识点添加视频教程
- 💡 名师讲解和案例分析

### 4. 知识图谱
- 💡 可视化知识点之间的关联
- 💡 构建完整的知识体系

## 总结

知识点详解功能为考生提供了：
- ✅ **系统化**的知识体系
- ✅ **结构化**的内容组织
- ✅ **实用性**的学习建议
- ✅ **便捷性**的练习入口

帮助考生更高效地备考，全面掌握考试要点！
