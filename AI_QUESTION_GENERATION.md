# 🤖 AI 题目生成功能说明

## 📋 功能概述

AI 题目生成功能允许管理员使用人工智能自动生成高质量的中医考试题目，大大提高题库建设效率。

---

## ✨ 主要特性

### 1. 智能题目生成
- ✅ 基于选定分类自动生成相关题目
- ✅ 支持多种难度等级（简单、中等、困难）
- ✅ 自动生成详细解析
- ✅ 符合 CALE/NCCAOM 考试标准

### 2. 灵活配置选项
- 📊 选择考试类型（CALE/NCCAOM）
- 📂 选择题目分类
- 🔢 自定义生成数量（1-50 道）
- 📈 选择难度级别
- 📝 选择题目类型（选择题/判断题/案例题）

### 3. 实时进度显示
- ⏳ 生成进度实时更新
- 📊 进度条可视化
- ✅ 生成完成即时反馈

---

## 🚀 使用指南

### 访问入口

#### 方法 1：题目管理页面
1. 登录管理后台
2. 点击左侧菜单「题目管理」
3. 点击右上角「🤖 AI 生成」按钮

#### 方法 2：直接访问
```
http://localhost:3000/admin/questions/ai-generate
```

---

### 生成步骤

#### 步骤 1：选择考试类型
- **CALE** - 加州中医执照考试
- **NCCAOM** - 全国中医执照考试

#### 步骤 2：选择题目分类
根据所选考试类型，系统会显示对应的分类列表：

**CALE 分类示例**：
- DOMAIN_1_ASSESSMENT（患者评估）
- DOMAIN_2_DIAGNOSIS（诊断）
- DOMAIN_3A_ACU_SELECTION（穴位选择）
- DOMAIN_3B_ACU_TECHNIQUE（针刺技术）
- DOMAIN_3C_ADJUNCTIVE（辅助疗法）
- DOMAIN_3D_HERBAL（中药）
- DOMAIN_4_PROFESSIONAL（职业道德）

#### 步骤 3：设置生成数量
- 推荐：每次生成 **5-20** 道题目
- 最少：1 道
- 最多：50 道

#### 步骤 4：选择难度级别

| 难度 | 说明 | 适用场景 |
|------|------|---------|
| 简单 | 基础知识测试 | 初学者练习 |
| 中等 | 综合应用题目 | 常规考试（推荐） |
| 困难 | 高级综合分析 | 高级挑战 |

#### 步骤 5：高级选项（可选）

展开「高级选项」可以配置：

1. **包含详细解析**
   - ✅ 推荐开启
   - 为每道题目生成详细的答案解析
   - 帮助学生理解知识点

2. **题目类型**
   - **选择题**（multiple_choice）- 默认
   - **判断题**（true_false）
   - **案例题**（case_study）

#### 步骤 6：开始生成
点击「🤖 开始生成」按钮，系统将：
1. 显示生成进度
2. 实时更新进度条
3. 完成后显示生成结果

---

## 📊 生成结果

### 查看生成的题目

生成完成后会显示：
- ✅ 成功提示（如：「✅ 成功生成 10 道题目！」）
- 📋 前 3 道题目预览
- 🔗 「查看全部题目」按钮

### 题目自动保存

生成的题目会自动保存到题库，包含：
- 题目内容
- 选项（如果是选择题）
- 正确答案
- 详细解析
- 分类信息
- 难度级别
- 考试类型

---

## 🎯 最佳实践

### 1. 批量生成策略

**推荐做法**：
```
✅ 分批生成，每次 10-15 道
✅ 按分类逐个生成
✅ 混合不同难度
```

**避免**：
```
❌ 一次性生成过多（如 50 道）
❌ 只生成单一难度
❌ 忽略题目质量检查
```

### 2. 质量控制

生成后建议：
1. ✅ 在「题目管理」中查看生成的题目
2. ✅ 检查题目内容准确性
3. ✅ 必要时进行编辑修改
4. ✅ 删除质量不佳的题目

### 3. 分类覆盖

建议按照考试大纲，为每个分类生成题目：

**CALE 示例**：
- Domain 1（27%）→ 生成 27 道
- Domain 2（17%）→ 生成 17 道
- Domain 3A（16%）→ 生成 16 道
- ...以此类推

### 4. 难度分布

建议难度分布：
- 简单：30%
- 中等：50%
- 困难：20%

---

## 🔧 技术细节

### API 端点
```typescript
POST /api/ai/generate-questions

请求体：
{
  examType: "cale" | "nccaom",
  categoryId: string,
  count: number (1-50),
  difficulty: "easy" | "medium" | "hard",
  includeExplanation: boolean,
  questionType: "multiple_choice" | "true_false" | "case_study"
}

响应：
{
  success: boolean,
  data: {
    questions: Question[],
    count: number
  }
}
```

### 生成算法

AI 生成使用以下技术：
1. **模板系统** - 基于真实考题的模板库
2. **知识图谱** - 中医知识点关联
3. **智能变量** - 随机组合生成多样化题目
4. **质量检查** - 自动验证题目合理性

---

## ⚠️ 注意事项

### 1. 生成限制

- ⏱️ 每次生成可能需要 **10-30 秒**（取决于数量）
- 🔢 单次最多生成 **50 道**题目
- 📊 建议分批生成以确保质量

### 2. 系统要求

- ✅ 必须以**管理员身份**登录
- ✅ 需要网络连接
- ✅ 浏览器支持现代 JavaScript

### 3. 数据管理

- 💾 生成的题目直接保存到数据库
- 🔄 可在「题目管理」中编辑或删除
- 📝 建议定期审核题库质量

---

## 🐛 常见问题

### Q1: 生成失败怎么办？

**可能原因**：
- 网络连接问题
- 服务器错误
- 参数配置错误

**解决方法**：
1. 检查网络连接
2. 刷新页面重试
3. 减少生成数量再试
4. 查看浏览器控制台错误信息

### Q2: 生成的题目质量如何保证？

**质量保证措施**：
- ✅ 基于真实考题模板
- ✅ 符合考试大纲要求
- ✅ 包含详细解析
- ✅ 管理员可手动审核编辑

### Q3: 可以批量删除生成的题目吗？

可以！在「题目管理」页面：
1. 使用筛选功能定位题目
2. 逐个删除不满意的题目
3. 或使用批量删除功能（如果已实现）

### Q4: 生成的题目会重复吗？

不会。系统使用以下机制避免重复：
- 🎲 随机变量组合
- 🔄 模板轮换使用
- 🆔 唯一性检查

### Q5: 能指定具体知识点生成吗？

当前版本按**分类**生成。
未来计划支持：
- 🎯 按知识点标签生成
- 📊 按考点权重生成
- 🔍 按关键词生成

---

## 📈 未来规划

### 计划中的功能

1. **更智能的生成**
   - 根据学生答题数据生成针对性题目
   - 分析薄弱知识点自动生成练习题
   - 支持自定义知识点组合

2. **批量操作**
   - 批量编辑生成的题目
   - 批量调整难度
   - 批量导出

3. **模板管理**
   - 自定义题目模板
   - 导入/导出模板
   - 分享优质模板

4. **质量评估**
   - AI 自动评估题目质量
   - 学生反馈集成
   - 题目使用统计

---

## 📞 技术支持

如果遇到问题或需要帮助：

1. 查看本文档的「常见问题」部分
2. 检查浏览器控制台错误信息
3. 查看服务器日志
4. 联系技术支持团队

---

## 📝 更新日志

### v1.0.0 (当前版本)
- ✅ 初始版本发布
- ✅ 支持 CALE 和 NCCAOM 题目生成
- ✅ 三种难度级别
- ✅ 实时进度显示
- ✅ 题目预览功能

---

**文档更新时间**：2024年（根据实际日期）
**维护者**：System Administrator

---

## 🎓 快速开始

想要立即体验？按照以下步骤：

```bash
# 1. 登录管理后台
访问：http://localhost:3000/auth/login
邮箱：chenwx2012@yahoo.com
密码：admin123

# 2. 进入 AI 生成页面
访问：http://localhost:3000/admin/questions/ai-generate

# 3. 配置生成参数
- 考试类型：CALE
- 分类：DOMAIN_1_ASSESSMENT
- 数量：10
- 难度：中等

# 4. 点击「开始生成」
等待 10-20 秒，查看生成结果！
```

祝您使用愉快！🎉
