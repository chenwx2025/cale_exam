# 更新日志

## [1.3.0] - 2025-10-19

### 🎓 多考试系统

#### ✨ 新功能
- ✅ **双考试支持**
  - 支持 Cale（加州中医执照考试）
  - 支持 NCCAOM（全国中医针灸认证考试）
  - 用户可自由切换考试类型
  - 每种考试拥有独立的考试大纲、题库和复习计划

- ✅ **考试选择器组件**
  - 全站统一的考试类型切换界面
  - 显示考试全名和详细描述
  - 选择状态持久化（localStorage）
  - 切换考试类型后自动刷新相关数据

- ✅ **数据隔离**
  - 分类按考试类型完全隔离
  - 题目按考试类型完全隔离
  - 允许相同的分类代码用于不同考试
  - 数据库级别的多租户设计

#### 🔧 数据库改进
- Category 和 Question 模型新增 `examType` 字段
- 复合唯一索引：`@@unique([code, examType])`
- 新增 `examType` 索引提升查询性能
- 向后兼容：默认值为 "cale"

#### 📡 API 更新
- 所有查询 API 支持 `examType` 参数过滤
- 创建分类/题目 API 支持 `examType` 字段
- 批量导入支持在数据中指定 `examType`
- 分类查询同时匹配 code 和 examType

#### 🎨 页面更新
- **首页**：添加考试选择器和双考试说明
- **考试大纲**：根据选择的考试类型显示相应大纲
- **练习页面**：只显示当前考试类型的题目
- **模拟考试**：分类和题目按考试类型过滤
- **复习计划**：支持为不同考试创建独立计划
- **管理后台**：创建分类时可选择考试类型

#### 📊 数据种子更新
- 为 Cale 和 NCCAOM 分别创建完整的分类树
- 为两种考试各创建 8 道示例题目
- 种子脚本智能处理两种考试类型

#### 💡 用户体验优化
- 考试切换后页面数据自动刷新
- 动态标题显示当前考试名称
- 清晰的考试类型视觉标识
- 平滑的状态切换体验

## [1.2.0] - 2025-10-19

### 🎯 模拟考试增强

#### ✨ 新功能
- ✅ **按具体分类多选**
  - 可以勾选任意分类组合进行考试
  - 快捷按钮：全选、清空、只选内容部分
  - 显示每个分类的题目数量
  - 分类按类型（组织/内容/复习）标注颜色

- ✅ **考试时长自定义**
  - 支持 30/45/60/90/120 分钟
  - 默认 60 分钟（标准）
  - 倒计时会根据设定的时长动态调整

- ✅ **题目数量调整**
  - 范围扩大：5-200 题
  - 添加建议提示（30-50题）

#### 🔧 API 改进
- 支持多个分类ID查询（`categoryIds` 参数）
- 支持按分类类型查询（`categoryType` 参数）
- 更灵活的题目筛选逻辑

#### 💡 用户体验优化
- 配置页面布局改进（更宽敞，最大宽度增加）
- 分类列表可滚动查看
- 实时显示已选分类数量
- 未选择分类时按钮禁用并提示

## [1.1.0] - 2025-10-19

### ✨ 新功能
- ✅ **JSON 格式支持**
  - 新增 JSON 文件批量导入功能
  - 支持两种 JSON 格式：数组格式和对象格式
  - JSON 格式更加结构化，适合大量题目导入
  - 管理后台新增 JSON 模板下载功能
  - 管理后台新增格式切换 Tab（Excel/CSV 和 JSON）

### 📚 文档更新
- 更新快速开始指南，添加 JSON 格式说明
- 更新 README，突出多格式支持
- 添加 JSON 模板示例文件

### 🎯 优势
- **高效**：JSON 格式结构清晰，易于编辑
- **灵活**：options 可以直接使用数组，不需要转义
- **强大**：支持嵌套数据结构

## [1.0.0] - 2025-10-19

### 🎉 初始版本

#### 新功能
- ✅ **考试大纲浏览**
  - 三大部分分类：组织、内容、复习
  - 多级分类支持
  - 题目数量统计

- ✅ **互动答题系统**
  - 实时显示题目所属分类
  - 即时反馈（对错提示）
  - 详细答案解析
  - 知识点关联显示
  - 难度标识

- ✅ **模拟考试**
  - 自定义考试配置（题目数、难度、范围）
  - 倒计时功能
  - 答题卡快速导航
  - 考试结果统计

- ✅ **复习计划**
  - 创建个性化学习计划
  - 设置学习目标和时间表
  - 选择重点分类

- ✅ **题目管理**
  - Excel/CSV 批量导入
  - 分类管理
  - 系统统计

#### 技术实现
- Nuxt 3 全栈框架
- Tailwind CSS 样式系统
- Prisma ORM 数据库管理
- SQLite 数据库（可切换到 PostgreSQL）
- TypeScript 类型安全

#### 安全性
- ✅ **依赖安全更新**
  - 使用 ExcelJS 替代 xlsx（修复原型污染漏洞）
  - 使用 PapaParse 处理 CSV（安全可靠）
  - 避免已知的 ReDoS 漏洞

- ✅ **数据安全**
  - Prisma ORM 自动防护 SQL 注入
  - 服务器端数据验证
  - 文件类型验证

#### 文档
- README.md - 项目介绍和使用说明
- QUICK_START.md - 快速启动指南
- PROJECT_OVERVIEW.md - 详细技术文档
- SECURITY.md - 安全性说明
- CHANGELOG.md - 更新日志

#### 示例数据
- 12 个预定义分类
- 8 道示例题目（包含详细解析）
- 1 个演示用户

### 📦 依赖版本

#### 核心依赖
- nuxt: ^3.19.3
- vue: ^3.5.22
- @prisma/client: ^6.4.0
- exceljs: ^4.4.0 ⚠️ 替代 xlsx
- papaparse: ^5.4.1 ⚠️ 新增

#### 开发依赖
- @nuxtjs/tailwindcss: ^6.12.2
- prisma: ^6.4.0
- tsx: ^4.19.2

### 🔧 已知问题

无

### 📝 后续计划

#### 短期（v1.1.0）
- [ ] 添加用户认证系统
- [ ] 错题本功能
- [ ] 学习进度图表
- [ ] 移动端响应式优化

#### 中期（v1.2.0）
- [ ] 多用户数据隔离
- [ ] 学习小组功能
- [ ] 导出学习报告
- [ ] 题目收藏功能

#### 长期（v2.0.0）
- [ ] AI 智能推荐
- [ ] 个性化学习路径
- [ ] 视频讲解集成
- [ ] PWA 离线学习

### 🙏 致谢

感谢所有开源项目的贡献者！

---

## 版本说明

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)：
- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正
