# 用户功能操作指南

本指南介绍系统中三个核心功能的使用方法：**模拟试题**、**重点知识点** 和 **易错题解析**。

---

## 1. 模拟试题（模拟考试）

### 功能入口
- **路径 1**: 登录后 → 学习中心（Dashboard） → "模拟考试"卡片
  - URL: `/exam/config`
- **路径 2**: 顶部导航栏 → "考试"菜单

### 操作流程

#### 步骤 1: 配置考试参数
访问 `/exam/config` 页面，您可以配置：

1. **题目数量**: 选择考试包含的题目数（建议 50-100 题）
2. **考试时间**: 设置考试时长（分钟）
3. **题目难度**:
   - 简单 (easy)
   - 中等 (medium)
   - 困难 (hard)
   - 混合难度
4. **题目类型**: 选择特定分类或全部分类
5. **考试模式**:
   - 正式模式：严格计时，不能查看答案
   - 练习模式：可以随时查看解析

#### 步骤 2: 开始考试
1. 点击"开始考试"按钮
2. 系统会生成一套随机试卷
3. 进入答题界面 `/exam/[id]`

#### 步骤 3: 答题过程
- **题目导航**: 点击题号快速跳转
- **标记题目**: 不确定的题目可以标记，稍后回顾
- **时间提醒**: 剩余时间不足时会有提示
- **暂停考试**: 可以暂停并稍后继续（练习模式）

#### 步骤 4: 提交并查看结果
1. 点击"提交试卷"
2. 系统自动批改并计算分数
3. 查看详细结果页面 `/exam/result/[id]`：
   - 总分和正确率
   - 每题的对错情况
   - 详细解析
   - 知识点分布
   - 错题自动加入错题本

### 相关文件
- **配置页面**: `pages/exam/config.vue`
- **答题页面**: `pages/exam/[id].vue`
- **结果页面**: `pages/exam/result/[id].vue`
- **题目集列表**: `pages/exam/question-sets.vue`

---

## 2. 重点知识点

### 功能入口
- **路径**: 学习中心 → 快速入口 → "考试大纲"（实际链接到知识点页面）
  - URL: `/knowledge-points`
- **直接访问**: 浏览器输入 `http://localhost:3000/knowledge-points`

### 功能特点

#### 可视化知识图谱
页面提供多种中医理论的可视化图表：

1. **阴阳理论图** (`YinYangDiagram.vue`)
   - 阴阳平衡概念
   - 互根互用关系
   - 消长转化过程

2. **五行分类图** (`WuXingDiagram.vue`)
   - 五行生克关系
   - 五脏六腑对应
   - 五色五味分类

3. **经络穴位图**
   - 十二经脉走向
   - 常用穴位定位
   - 穴位主治功能

4. **脉象诊断图** (`PulseDiagram.vue`)
   - 28种常见脉象
   - 脉象特征描述
   - 临床意义

5. **八纲辨证图** (`BaGanDiagram.vue`)
   - 表里、寒热、虚实、阴阳
   - 辨证要点

6. **气血津液图** (`QiXueJinYeDiagram.vue`)
   - 气的分类和功能
   - 血的生成和运行
   - 津液的代谢

#### 知识点分类浏览
- **按章节**: 中医基础理论、诊断、方剂、针灸等
- **按难度**: 基础、进阶、高级
- **按考试类型**: CALE 特有、NCCAOM 特有、通用知识点

#### 学习功能
- **收藏重点**: 标记重要知识点
- **学习进度**: 追踪已学习的知识点
- **关联题目**: 点击知识点查看相关练习题
- **导出笔记**: 将知识点导出为 PDF（如果实现）

### 操作建议
1. **系统学习**: 按章节顺序学习，建立完整知识体系
2. **考前复习**: 重点查看标记的知识点
3. **结合练习**: 学习知识点后立即做相关练习题巩固

### 相关文件
- **主页面**: `pages/knowledge-points.vue`
- **可视化组件**: `components/YinYangDiagram.vue`, `components/WuXingDiagram.vue` 等
- **知识点数据**: `public/knowledges/*.json`

---

## 3. 易错题解析

### 功能入口
- **路径 1**: 学习中心 → 学习进度卡片 → "错题收藏"数字
  - URL: `/wrong-questions`
- **路径 2**: 考试结果页面 → 自动将做错的题加入错题本
- **路径 3**: 快速入口 → "已做题目" → 筛选错题

### 功能特点

#### 错题收集
系统会自动收集您在以下场景做错的题目：
1. **模拟考试**: 考试中做错的题目
2. **章节练习**: 练习时做错的题目
3. **随机练习**: 日常练习中做错的题目

#### 错题分类
错题本提供多维度分类：

1. **按考试类型**:
   - CALE 错题
   - NCCAOM 错题

2. **按章节**:
   - 中医基础理论
   - 诊断学
   - 方剂学
   - 针灸学
   - 其他分类

3. **按难度**:
   - 简单题错题
   - 中等题错题
   - 困难题错题

4. **按错误次数**:
   - 一次错误
   - 多次错误（重点复习）

#### 错题练习
1. **专项练习**:
   - 选择特定分类的错题
   - 设置练习题目数量
   - 开始针对性练习

2. **错题重做**:
   - 不看答案重新作答
   - 检验是否真正掌握

3. **对比学习**:
   - 查看第一次做错的答案
   - 对比当前的答案
   - 分析进步情况

#### 详细解析
每道错题都包含：
- **题目内容**: 完整题干和选项
- **正确答案**: 标准答案及解释
- **您的答案**: 您选择的错误答案
- **解析说明**: 详细的知识点解析
- **相关知识点**: 关联的理论知识
- **做题记录**: 第一次错误时间、重做次数

#### 错题管理
- **移除错题**: 已经掌握的题目可以移出错题本
- **标记星标**: 特别重要的错题加星标
- **添加笔记**: 为错题添加个人学习笔记
- **导出错题**: 将错题导出为文档复习

### 操作流程

#### 1. 查看错题
```
登录 → /wrong-questions → 查看所有错题列表
```

#### 2. 筛选错题
- 选择考试类型（CALE/NCCAOM）
- 选择章节分类
- 选择难度级别
- 查看筛选结果

#### 3. 开始错题练习
```
错题本页面 → 选择分类 → "开始练习" → 答题 → 查看结果
```

#### 4. 查看详细解析
- 点击任一错题
- 阅读详细解析
- 查看相关知识点链接
- 跳转到知识点页面深度学习

#### 5. 管理错题
- 移除已掌握的题目
- 为重点错题添加标记
- 定期复习多次错误的题目

### 相关文件
- **错题本页面**: `pages/wrong-questions.vue`
- **错题API**: `server/api/wrong-questions/*.ts`
- **题目组件**: `components/QuestionCard.vue`

---

## 数据流程

### 模拟试题数据流
```
1. 用户配置考试参数
   ↓
2. POST /api/exam/create
   - 从题库中随机抽取题目
   - 创建 Exam 记录
   - 创建 QuestionSet 记录
   ↓
3. 用户答题
   - 保存用户答案到 UserAnswer 表
   ↓
4. 提交考试
   - 批改计分
   - 更新 Exam 状态为 'completed'
   ↓
5. 做错的题目自动加入 WrongQuestion 表
```

### 知识点数据流
```
1. 页面加载
   ↓
2. GET /api/knowledge-points
   - 从 JSON 文件读取知识点数据
   - 返回结构化的知识点树
   ↓
3. 渲染可视化图表
   - 使用 D3.js 或 Vue 组件
   - 展示知识点关系图
   ↓
4. 用户点击知识点
   - 显示详细内容
   - 显示相关练习题
```

### 错题本数据流
```
1. 用户做题
   ↓
2. 提交答案（答错）
   - 创建 UserAnswer 记录
   - isCorrect = false
   ↓
3. 自动创建 WrongQuestion 记录
   - questionId
   - userId
   - wrongCount++
   ↓
4. 用户访问错题本
   - GET /api/wrong-questions
   - 返回错题列表
   ↓
5. 错题重做
   - 更新 wrongCount
   - 如果正确，可选择移除
```

---

## 相关 API 端点

### 模拟试题 API
- `POST /api/exam/create` - 创建新考试
- `GET /api/exam/:id` - 获取考试详情
- `POST /api/exam/:id/submit` - 提交考试答案
- `GET /api/exam/:id/result` - 获取考试结果
- `GET /api/exam/list` - 获取用户考试列表

### 知识点 API
- `GET /api/knowledge-points` - 获取所有知识点
- `GET /api/knowledge-points/:id` - 获取特定知识点详情
- `GET /api/knowledge-points/category/:category` - 按分类获取
- `POST /api/knowledge-points/favorite` - 收藏知识点

### 错题 API
- `GET /api/wrong-questions` - 获取用户错题列表
- `GET /api/wrong-questions/count` - 获取错题数量
- `POST /api/wrong-questions/add` - 手动添加错题
- `DELETE /api/wrong-questions/:id` - 移除错题
- `PUT /api/wrong-questions/:id/note` - 添加笔记
- `GET /api/wrong-questions/stats` - 错题统计数据

---

## 学习建议

### 高效备考流程
1. **第一阶段：系统学习**（4-6周）
   - 使用"重点知识点"系统学习理论
   - 每天学习 2-3 个章节
   - 完成配套练习题

2. **第二阶段：强化练习**（3-4周）
   - 每天完成 1-2 套模拟试题
   - 认真复习错题
   - 重点攻克薄弱章节

3. **第三阶段：冲刺复习**（1-2周）
   - 重做所有错题
   - 每天 1 套完整模拟考试
   - 查漏补缺

### 使用技巧
1. **每日学习时间建议**: 2-3 小时
2. **错题复习频率**: 每周至少 2 次
3. **模拟考试频率**: 每周 2-3 次
4. **知识点复习**: 考前一周快速过一遍

---

## 常见问题

### Q1: 模拟试题的题目来源？
A: 题目来自：
- 历年真题改编
- 专家团队原创
- AI 智能生成（基于考试大纲）

### Q2: 错题本会自动清空吗？
A: 不会。错题会永久保存，除非您手动移除。

### Q3: 知识点内容会更新吗？
A: 会的。我们会根据考试大纲变化定期更新知识点内容。

### Q4: 能否导出学习数据？
A: 目前支持导出：
- 考试成绩单
- 错题列表
- 学习进度报告

### Q5: 模拟考试的评分标准？
A:
- 单选题：选对得分，选错不得分
- 多选题：全部选对得满分，少选得部分分，多选或错选不得分
- 总分 = Σ(各题得分)

---

## 技术实现细节

### 数据库表结构
- **Exam**: 考试记录表
- **QuestionSet**: 题目集合（每次考试的题目）
- **UserAnswer**: 用户答题记录
- **WrongQuestion**: 错题记录
- **Question**: 题库
- **Category**: 知识点分类

### 前端技术栈
- **Vue 3**: UI 框架
- **Nuxt 3**: SSR 框架
- **Chart.js**: 数据可视化（错题统计图表）
- **Tailwind CSS**: 样式

### 后端技术栈
- **Nuxt Server API**: RESTful API
- **Prisma**: ORM
- **SQLite**: 数据库

---

## 更新日志

### v1.0.0 (2025-10-22)
- ✅ 修复数据分析页面 BigInt 序列化错误
- ✅ 修复 analytics 图表渲染时序问题
- ✅ 优化错题本查询性能
- ✅ 完善知识点可视化组件

### 待开发功能
- [ ] 错题导出 PDF 功能
- [ ] 知识点学习进度追踪
- [ ] 模拟考试排行榜
- [ ] AI 智能推荐薄弱知识点
- [ ] 学习时长统计和提醒

---

## 联系支持

如果您在使用过程中遇到任何问题，请通过以下方式联系我们：
- 邮箱: support@example.com
- 在线客服: 系统右下角聊天图标
- GitHub Issues: https://github.com/yourrepo/issues
