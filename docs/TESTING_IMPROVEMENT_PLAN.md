# æµ‹è¯•æ”¹å–„è®¡åˆ’

## å½“å‰çŠ¶æ€åˆ†æž

### é—®é¢˜
- âŒ **æ— æµ‹è¯•æ–‡ä»¶**: é¡¹ç›®ä¸­æ²¡æœ‰ä»»ä½•æµ‹è¯•ä»£ç 
- âŒ **æ— æµ‹è¯•æ¡†æž¶**: package.json ä¸­æ²¡æœ‰æµ‹è¯•ç›¸å…³ä¾èµ–
- âŒ **æ— æµ‹è¯•è„šæœ¬**: æ²¡æœ‰é…ç½®æµ‹è¯•è¿è¡Œå‘½ä»¤
- âŒ **æ— CI/CDé›†æˆ**: æ²¡æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
- âš ï¸  **æµ‹è¯•è¦†ç›–çŽ‡**: 0% (FINAL_PROJECT_STATUS.md ä¸­æ ‡è®°ä¸º 3/10)

### å½±å“
- æ— æ³•ä¿è¯ä»£ç è´¨é‡
- é‡æž„å’Œæ–°åŠŸèƒ½å¼€å‘é£Žé™©é«˜
- ä¸Šçº¿å‰ç¼ºå°‘è‡ªåŠ¨åŒ–éªŒè¯
- å›¢é˜Ÿåä½œç¼ºå°‘è´¨é‡é—¨æ§›

## æµ‹è¯•æ”¹å–„ç›®æ ‡

### çŸ­æœŸç›®æ ‡ (1-2å¤©)
- âœ… å®‰è£…å¹¶é…ç½®æµ‹è¯•æ¡†æž¶
- âœ… å®žçŽ°æ ¸å¿ƒå·¥å…·å‡½æ•°æµ‹è¯• (è¦†ç›–çŽ‡ > 80%)
- âœ… å®žçŽ°å…³é”®APIç«¯ç‚¹æµ‹è¯• (è‡³å°‘20ä¸ªæ ¸å¿ƒç«¯ç‚¹)
- âœ… é…ç½®æµ‹è¯•è¦†ç›–çŽ‡æŠ¥å‘Š

### ä¸­æœŸç›®æ ‡ (3-5å¤©)
- ðŸ“‹ å®žçŽ°æ‰€æœ‰APIç«¯ç‚¹æµ‹è¯•
- ðŸ“‹ å®žçŽ°æ ¸å¿ƒVueç»„ä»¶æµ‹è¯•
- ðŸ“‹ å®žçŽ°E2Eæµ‹è¯• (å…³é”®ç”¨æˆ·æµç¨‹)
- ðŸ“‹ é›†æˆåˆ°CI/CDæµç¨‹

### é•¿æœŸç›®æ ‡
- ðŸ“‹ è¾¾åˆ°æ•´ä½“æµ‹è¯•è¦†ç›–çŽ‡ > 70%
- ðŸ“‹ æ‰€æœ‰æ–°åŠŸèƒ½è¦æ±‚é…å¥—æµ‹è¯•
- ðŸ“‹ å»ºç«‹æµ‹è¯•é©±åŠ¨å¼€å‘(TDD)æµç¨‹

## æµ‹è¯•æŠ€æœ¯æ ˆé€‰æ‹©

### 1. Vitest (æŽ¨è â­)
**ç”¨é€”**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

**ä¼˜åŠ¿**:
- âœ… ä¸Ž Vite/Nuxt 3 å®Œç¾Žé›†æˆ
- âœ… å¿«é€Ÿæ‰§è¡Œ
- âœ… å…¼å®¹ Jest API
- âœ… å†…ç½®ä»£ç è¦†ç›–çŽ‡
- âœ… TypeScript åŽŸç”Ÿæ”¯æŒ

**å®‰è£…**:
```bash
npm install -D vitest @vitest/ui @vitest/coverage-v8
```

### 2. @vue/test-utils
**ç”¨é€”**: Vue ç»„ä»¶æµ‹è¯•

**ä¼˜åŠ¿**:
- âœ… Vue 3 å®˜æ–¹æµ‹è¯•å·¥å…·
- âœ… å®Œæ•´çš„ç»„ä»¶æŒ‚è½½å’Œäº¤äº’API
- âœ… æ”¯æŒ Composition API

**å®‰è£…**:
```bash
npm install -D @vue/test-utils
```

### 3. @nuxt/test-utils
**ç”¨é€”**: Nuxt ç‰¹å®šåŠŸèƒ½æµ‹è¯•

**ä¼˜åŠ¿**:
- âœ… Nuxt å®˜æ–¹æµ‹è¯•å·¥å…·
- âœ… æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“æµ‹è¯•
- âœ… å†…ç½®æµ‹è¯•çŽ¯å¢ƒè®¾ç½®

**å®‰è£…**:
```bash
npm install -D @nuxt/test-utils
```

### 4. Playwright (å¯é€‰)
**ç”¨é€”**: E2E ç«¯åˆ°ç«¯æµ‹è¯•

**ä¼˜åŠ¿**:
- âœ… è·¨æµè§ˆå™¨æµ‹è¯•
- âœ… çœŸå®žç”¨æˆ·åœºæ™¯æ¨¡æ‹Ÿ
- âœ… å¼ºå¤§çš„é€‰æ‹©å™¨å’Œæ–­è¨€

**å®‰è£…**:
```bash
npm install -D @playwright/test
```

### 5. Supertest
**ç”¨é€”**: HTTP API æµ‹è¯•

**ä¼˜åŠ¿**:
- âœ… ç®€æ´çš„ API æµ‹è¯•è¯­æ³•
- âœ… ä¸éœ€è¦å¯åŠ¨çœŸå®žæœåŠ¡å™¨
- âœ… ä¸Ž Vitest é…åˆè‰¯å¥½

**å®‰è£…**:
```bash
npm install -D supertest @types/supertest
```

## æµ‹è¯•ç›®å½•ç»“æž„

```
cale_exam/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.test.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ achievement-service.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ exam-utils.test.ts
â”‚   â”‚   â””â”€â”€ composables/           # Composables æµ‹è¯•
â”‚   â”‚       â””â”€â”€ useAuth.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/               # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ api/                   # API ç«¯ç‚¹æµ‹è¯•
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.test.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ questions.test.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ study-groups.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ user.test.ts
â”‚   â”‚   â””â”€â”€ database/              # æ•°æ®åº“é›†æˆæµ‹è¯•
â”‚   â”‚       â””â”€â”€ prisma.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ component/                 # ç»„ä»¶æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ QuestionCard.test.ts
â”‚   â”‚   â”œâ”€â”€ StudyGroupCheckIn.test.ts
â”‚   â”‚   â””â”€â”€ ExamResults.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ e2e/                       # E2E æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ auth-flow.spec.ts
â”‚   â”‚   â”œâ”€â”€ exam-taking.spec.ts
â”‚   â”‚   â””â”€â”€ study-groups.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ fixtures/                  # æµ‹è¯•æ•°æ®
â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”œâ”€â”€ questions.ts
â”‚   â”‚   â””â”€â”€ study-groups.ts
â”‚   â”‚
â”‚   â””â”€â”€ helpers/                   # æµ‹è¯•è¾…åŠ©å‡½æ•°
â”‚       â”œâ”€â”€ test-db.ts            # æµ‹è¯•æ•°æ®åº“è®¾ç½®
â”‚       â”œâ”€â”€ auth-helpers.ts       # è®¤è¯è¾…åŠ©
â”‚       â””â”€â”€ mock-data.ts          # Mock æ•°æ®ç”Ÿæˆ
â”‚
â”œâ”€â”€ vitest.config.ts              # Vitest é…ç½®
â”œâ”€â”€ playwright.config.ts          # Playwright é…ç½® (å¯é€‰)
â””â”€â”€ coverage/                     # è¦†ç›–çŽ‡æŠ¥å‘Š (è‡ªåŠ¨ç”Ÿæˆ)
```

## ä¼˜å…ˆæµ‹è¯•çš„åŠŸèƒ½æ¨¡å—

### ðŸ”´ é«˜ä¼˜å…ˆçº§ (æ ¸å¿ƒä¸šåŠ¡é€»è¾‘)

#### 1. è®¤è¯ç³»ç»Ÿ
- `server/utils/auth.ts` - JWT ç”Ÿæˆå’ŒéªŒè¯
- `server/api/auth/login.post.ts` - ç™»å½•
- `server/api/auth/register.post.ts` - æ³¨å†Œ
- `server/api/auth/refresh.post.ts` - Token åˆ·æ–°
- `stores/auth.ts` - è®¤è¯çŠ¶æ€ç®¡ç†

#### 2. é¢˜åº“ç³»ç»Ÿ
- `server/api/questions/index.get.ts` - èŽ·å–é¢˜ç›®
- `server/api/questions/submit.post.ts` - æäº¤ç­”æ¡ˆ
- `server/api/questions/generate.post.ts` - AI ç”Ÿæˆé¢˜ç›®
- `server/utils/exam-utils.ts` - è€ƒè¯•é€»è¾‘

#### 3. å­¦ä¹ å°ç»„
- `server/api/study-groups/[id]/posts.{get,post}.ts` - å¸–å­CRUD
- `server/api/study-group-check-in.{get,post}.ts` - æ‰“å¡åŠŸèƒ½
- `server/api/study-groups/[id]/members.ts` - æˆå‘˜ç®¡ç†

#### 4. æˆå°±ç³»ç»Ÿ
- `server/utils/achievement-service.ts` - æˆå°±è®¡ç®—
- `server/api/achievements/index.get.ts` - èŽ·å–æˆå°±

### ðŸŸ¡ ä¸­ä¼˜å…ˆçº§ (é‡è¦åŠŸèƒ½)

#### 5. ç”¨æˆ·æ•°æ®
- `server/api/user/progress.get.ts` - å­¦ä¹ è¿›åº¦
- `server/api/user/stats.get.ts` - ç»Ÿè®¡æ•°æ®
- `server/api/user/bookmarks.get.ts` - æ”¶è—ç®¡ç†

#### 6. ç¬”è®°ç³»ç»Ÿ
- `server/api/study-groups/[groupId]/notes/` - ç¬”è®°CRUD
- `server/api/personal-notes/` - ä¸ªäººç¬”è®°

#### 7. èµ„æºåº“
- `server/api/study-groups/[id]/resources/` - èµ„æºç®¡ç†

### ðŸŸ¢ ä½Žä¼˜å…ˆçº§ (è¾…åŠ©åŠŸèƒ½)

#### 8. é€šçŸ¥ç³»ç»Ÿ
- `server/api/notifications/` - é€šçŸ¥ç®¡ç†

#### 9. æœç´¢åŠŸèƒ½
- `server/api/study-groups/[id]/posts/search.get.ts`

## æµ‹è¯•å®žçŽ°æ­¥éª¤

### Phase 1: çŽ¯å¢ƒæ­å»º (Day 1)

1. **å®‰è£…ä¾èµ–**
```bash
npm install -D vitest @vitest/ui @vitest/coverage-v8 \
  @vue/test-utils @nuxt/test-utils \
  supertest @types/supertest \
  happy-dom
```

2. **åˆ›å»ºé…ç½®æ–‡ä»¶**
- `vitest.config.ts`
- æ›´æ–° `package.json` æ·»åŠ æµ‹è¯•è„šæœ¬

3. **è®¾ç½®æµ‹è¯•çŽ¯å¢ƒ**
- é…ç½®æµ‹è¯•æ•°æ®åº“
- åˆ›å»ºæµ‹è¯•è¾…åŠ©å‡½æ•°

### Phase 2: å·¥å…·å‡½æ•°æµ‹è¯• (Day 1)

**ç›®æ ‡**: è¦†ç›–çŽ‡ > 80%

å®žçŽ°æµ‹è¯•:
- `tests/unit/utils/auth.test.ts`
- `tests/unit/utils/achievement-service.test.ts`
- `tests/unit/utils/mention-parser.test.ts`

### Phase 3: API é›†æˆæµ‹è¯• (Day 2)

**ç›®æ ‡**: è‡³å°‘ 20 ä¸ªæ ¸å¿ƒç«¯ç‚¹

å®žçŽ°æµ‹è¯•:
- è®¤è¯ API (5ä¸ª)
- é¢˜åº“ API (5ä¸ª)
- å­¦ä¹ å°ç»„ API (7ä¸ª)
- ç”¨æˆ·æ•°æ® API (3ä¸ª)

### Phase 4: ç»„ä»¶æµ‹è¯• (Day 3)

**ç›®æ ‡**: æ ¸å¿ƒç»„ä»¶è¦†ç›–

å®žçŽ°æµ‹è¯•:
- `QuestionCard.vue`
- `StudyGroupCheckIn.vue`
- `MarkdownEditor.vue`
- `PollDisplay.vue`

### Phase 5: E2E æµ‹è¯• (å¯é€‰, Day 4-5)

**ç›®æ ‡**: å…³é”®ç”¨æˆ·æµç¨‹

å®žçŽ°æµ‹è¯•:
- ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹
- åšé¢˜å’Œæäº¤ç­”æ¡ˆæµç¨‹
- å°ç»„è®¨è®ºå’Œæ‰“å¡æµç¨‹

## æµ‹è¯•è¦†ç›–çŽ‡ç›®æ ‡

### æŒ‰æ¨¡å—

| æ¨¡å— | å½“å‰è¦†ç›–çŽ‡ | ç›®æ ‡è¦†ç›–çŽ‡ | ä¼˜å…ˆçº§ |
|-----|----------|----------|--------|
| å·¥å…·å‡½æ•° (utils/) | 0% | 80%+ | ðŸ”´ é«˜ |
| API ç«¯ç‚¹ (server/api/) | 0% | 70%+ | ðŸ”´ é«˜ |
| Stores (stores/) | 0% | 60%+ | ðŸŸ¡ ä¸­ |
| ç»„ä»¶ (components/) | 0% | 50%+ | ðŸŸ¡ ä¸­ |
| é¡µé¢ (pages/) | 0% | 30%+ | ðŸŸ¢ ä½Ž |

### æ•´ä½“ç›®æ ‡

- **Phase 1 å®ŒæˆåŽ**: 30%+ æ•´ä½“è¦†ç›–çŽ‡
- **Phase 2 å®ŒæˆåŽ**: 50%+ æ•´ä½“è¦†ç›–çŽ‡
- **Phase 3 å®ŒæˆåŽ**: 70%+ æ•´ä½“è¦†ç›–çŽ‡

## æˆåŠŸæŒ‡æ ‡

### å®šé‡æŒ‡æ ‡
- âœ… è‡³å°‘ 100 ä¸ªæµ‹è¯•ç”¨ä¾‹
- âœ… å·¥å…·å‡½æ•°è¦†ç›–çŽ‡ > 80%
- âœ… API è¦†ç›–çŽ‡ > 70%
- âœ… æ•´ä½“è¦†ç›–çŽ‡ > 50%
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡æ—¶é—´ < 30ç§’

### å®šæ€§æŒ‡æ ‡
- âœ… æ¯ä¸ªæ ¸å¿ƒåŠŸèƒ½éƒ½æœ‰æµ‹è¯•
- âœ… å…³é”®bugéƒ½æœ‰å›žå½’æµ‹è¯•
- âœ… æµ‹è¯•æ–‡æ¡£å®Œæ•´
- âœ… å›¢é˜Ÿæˆå‘˜èƒ½è½»æ¾è¿è¡Œæµ‹è¯•

## ç»´æŠ¤ç­–ç•¥

### æµ‹è¯•è§„èŒƒ
1. **æ–°åŠŸèƒ½å¿…é¡»å¸¦æµ‹è¯•**: PR åˆå¹¶å‰éœ€è¦æµ‹è¯•è¦†ç›–
2. **Bug ä¿®å¤éœ€è¦æµ‹è¯•**: é˜²æ­¢å›žå½’
3. **å®šæœŸå®¡æŸ¥**: æ¯æœˆæ£€æŸ¥æµ‹è¯•è´¨é‡
4. **ä¿æŒæµ‹è¯•å¿«é€Ÿ**: å•å…ƒæµ‹è¯• < 10ç§’, é›†æˆæµ‹è¯• < 30ç§’

### CI/CD é›†æˆ
```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run test
      - run: npm run test:coverage
      - uses: codecov/codecov-action@v3  # ä¸Šä¼ è¦†ç›–çŽ‡æŠ¥å‘Š
```

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ (ä»Šå¤©)
1. âœ… å®‰è£…æµ‹è¯•æ¡†æž¶ä¾èµ–
2. âœ… åˆ›å»º vitest.config.ts
3. âœ… å®žçŽ°ç¬¬ä¸€ä¸ªæµ‹è¯• (auth.test.ts)
4. âœ… é…ç½®è¦†ç›–çŽ‡æŠ¥å‘Š
5. âœ… æ›´æ–° package.json è„šæœ¬

### æœ¬å‘¨å®Œæˆ
- ðŸ“‹ å®Œæˆæ‰€æœ‰å·¥å…·å‡½æ•°æµ‹è¯•
- ðŸ“‹ å®Œæˆ 20+ API ç«¯ç‚¹æµ‹è¯•
- ðŸ“‹ è¾¾åˆ° 30%+ æ•´ä½“è¦†ç›–çŽ‡
- ðŸ“‹ åˆ›å»ºæµ‹è¯•æ–‡æ¡£

### ä¸‹å‘¨ç›®æ ‡
- ðŸ“‹ å®žçŽ°ç»„ä»¶æµ‹è¯•
- ðŸ“‹ è¾¾åˆ° 50%+ æ•´ä½“è¦†ç›–çŽ‡
- ðŸ“‹ é›†æˆ CI/CD

---

**åˆ›å»ºæ—¶é—´**: 2025-10-24
**çŠ¶æ€**: ðŸ“‹ å¾…æ‰§è¡Œ
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ
**é¢„è®¡å®Œæˆ**: 5-7å¤©
