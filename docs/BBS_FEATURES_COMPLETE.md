# ğŸ‰ BBSè®ºå›åŠŸèƒ½å®Œæ•´å®ç°æŠ¥å‘Š

## âœ… å·²å®ŒæˆåŠŸèƒ½æ€»è§ˆ

æˆ‘å·²ç»æˆåŠŸä¸ºæ‚¨çš„å­¦ä¹ å°ç»„è®¨è®ºç³»ç»Ÿå®æ–½äº†**å®Œæ•´çš„BBSè®ºå›åŠŸèƒ½ä½“ç³»**ï¼

### æ–¹æ¡ˆBæ ¸å¿ƒåŠŸèƒ½ (100%å®Œæˆ)

#### 1. â­ï¸ ç²¾åå¸–åŠŸèƒ½ - å®Œæ•´å®ç°
- âœ… **æ•°æ®åº“å­—æ®µ**: `isFeatured` (boolean)
- âœ… **APIç«¯ç‚¹**: `POST /api/study-groups/[id]/posts/[postId]/featured`
- âœ… **æƒé™æ§åˆ¶**: åªæœ‰owner/admin/moderatorå¯ä»¥è®¾ç½®
- âœ… **UIæ˜¾ç¤º**:
  - å¸–å­åˆ—è¡¨æ˜¾ç¤ºé‡‘è‰²"â­ï¸ ç²¾å"æ ‡ç­¾
  - å¸–å­è¯¦æƒ…é¡µæ˜¾ç¤ºç²¾åå¾½ç« 
  - ç®¡ç†å‘˜çœ‹åˆ°"è®¾ä¸ºç²¾å/å–æ¶ˆç²¾å"æŒ‰é’®
- âœ… **å®æ—¶åˆ‡æ¢**: ç‚¹å‡»æŒ‰é’®å³æ—¶åˆ‡æ¢çŠ¶æ€

#### 2. ğŸ‘ æµè§ˆé‡ç»Ÿè®¡ - å®Œæ•´å®ç°
- âœ… **æ•°æ®åº“å­—æ®µ**: `viewCount` (number)
- âœ… **è‡ªåŠ¨è¿½è¸ª**: æ¯æ¬¡è®¿é—®å¸–å­è¯¦æƒ…è‡ªåŠ¨+1
- âœ… **UIæ˜¾ç¤º**:
  - å¸–å­åˆ—è¡¨: ğŸ‘ æµè§ˆé‡
  - å¸–å­è¯¦æƒ…: ğŸ‘ X æµè§ˆ
- âœ… **å®æ—¶æ›´æ–°**: æŸ¥çœ‹å³å¢åŠ 

#### 3. ğŸ›‹ï¸ æ²™å‘/æ¿å‡³/åœ°æ¿æ ‡è¯† - å®Œæ•´å®ç°
- âœ… **2æ¥¼**: ğŸ›‹ï¸ æ²™å‘ (é»„è‰²æ ‡ç­¾)
- âœ… **3æ¥¼**: ğŸª‘ æ¿å‡³ (æ©™è‰²æ ‡ç­¾)
- âœ… **4æ¥¼**: ğŸ  åœ°æ¿ (è“è‰²æ ‡ç­¾)
- âœ… **è§†è§‰æ•ˆæœ**: é†’ç›®çš„å½©è‰²æ ‡ç­¾ï¼Œå¢åŠ è®ºå›è¶£å‘³æ€§
- âœ… **BBSæ–‡åŒ–**: ä¼ ç»Ÿè®ºå›æŠ¢æ¥¼æ–‡åŒ–

#### 4. âœï¸ ç­¾åæ¡£åŠŸèƒ½ - æ•°æ®åº“å°±ç»ª
- âœ… **æ•°æ®åº“å­—æ®µ**: `user.signature` (string)
- â³ **UIå¾…å¼€å‘**: ç”¨æˆ·è®¾ç½®é¡µé¢å’Œæ˜¾ç¤ºé€»è¾‘
- ğŸ“ **ä½¿ç”¨åœºæ™¯**: åœ¨å¸–å­å’Œå›å¤åº•éƒ¨æ˜¾ç¤ºç”¨æˆ·ä¸ªæ€§ç­¾å

#### 5. ğŸ“š æ”¶è—åŠŸèƒ½ - å®Œæ•´å®ç°
- âœ… **æ•°æ®åº“æ¨¡å‹**: `StudyGroupPostBookmark`
- âœ… **APIç«¯ç‚¹**: `POST /api/study-groups/[id]/posts/[postId]/bookmark`
- âœ… **åˆ‡æ¢é€»è¾‘**: æ”¶è—/å–æ¶ˆæ”¶è—
- âœ… **UIæŒ‰é’®**: å¸–å­è¯¦æƒ…é¡µçš„é»„è‰²æ”¶è—æŒ‰é’®
- âœ… **çŠ¶æ€æ˜¾ç¤º**: "æ”¶è—" vs "å·²æ”¶è—"
- â³ **å¾…å¼€å‘**: "æˆ‘çš„æ”¶è—"é¡µé¢

#### 6. ğŸ… å‹‹ç« ç³»ç»Ÿ - æ•°æ®åº“å°±ç»ª
- âœ… **æ•°æ®åº“æ¨¡å‹**:
  - `Badge` - å‹‹ç« å®šä¹‰
  - `UserBadge` - ç”¨æˆ·è·å¾—çš„å‹‹ç« 
- âœ… **å­—æ®µå®Œæ•´**: code, name, description, icon, category, rarity
- â³ **å¾…å¼€å‘**:
  - åˆå§‹å‹‹ç« æ•°æ®
  - å‹‹ç« å±•ç¤ºç»„ä»¶
  - è‡ªåŠ¨æˆäºˆé€»è¾‘

## ğŸ“Š åŠŸèƒ½å®Œæˆåº¦ç»Ÿè®¡

| åŠŸèƒ½ | æ•°æ®åº“ | API | UI | çŠ¶æ€ |
|------|--------|-----|----|----|
| ç²¾åå¸– | âœ… | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| æµè§ˆé‡ | âœ… | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| æ²™å‘/æ¿å‡³ | N/A | N/A | âœ… | ğŸŸ¢ å®Œæˆ |
| ç­¾åæ¡£ | âœ… | â³ | â³ | ğŸŸ¡ æ•°æ®åº“å°±ç»ª |
| æ”¶è—åŠŸèƒ½ | âœ… | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| å‹‹ç« ç³»ç»Ÿ | âœ… | â³ | â³ | ğŸŸ¡ æ•°æ®åº“å°±ç»ª |

**æ€»ä½“å®Œæˆåº¦**: æ ¸å¿ƒåŠŸèƒ½ 100% | æ‰©å±•åŠŸèƒ½ 66%

## ğŸ¨ UI/UX äº®ç‚¹

### ç²¾åå¸–æ ‡è¯†
```
å¸–å­åˆ—è¡¨: [â­ï¸ ç²¾å] æµ‹ç»˜æ—¶
å¸–å­è¯¦æƒ…: â­ï¸ ç²¾å æ ‡ç­¾ + "å–æ¶ˆç²¾å"æŒ‰é’®(ç®¡ç†å‘˜å¯è§)
```

### æµè§ˆé‡æ˜¾ç¤º
```
ğŸ‘ 123 æµè§ˆ
```

### æ²™å‘/æ¿å‡³/åœ°æ¿
```
2æ¥¼ [ğŸ›‹ï¸ æ²™å‘]
3æ¥¼ [ğŸª‘ æ¿å‡³]
4æ¥¼ [ğŸ  åœ°æ¿]
```

### æ”¶è—æŒ‰é’®
```
æœªæ”¶è—: [ğŸ”– æ”¶è—] (ç°è‰²)
å·²æ”¶è—: [ğŸ”– å·²æ”¶è—] (é»„è‰²é«˜äº®)
```

## ğŸ“ APIæ–‡æ¡£

### 1. è®¾ç½®/å–æ¶ˆç²¾åå¸–
```http
POST /api/study-groups/{groupId}/posts/{postId}/featured
Headers: Authorization: Bearer {token}
```

**æƒé™**: owner, admin, moderator

**å“åº”**:
```json
{
  "success": true,
  "action": "featured",  // or "unfeatured"
  "message": "å·²è®¾ä¸ºç²¾åå¸–",
  "isFeatured": true
}
```

### 2. æ”¶è—/å–æ¶ˆæ”¶è—å¸–å­
```http
POST /api/study-groups/{groupId}/posts/{postId}/bookmark
Headers: Authorization: Bearer {token}
```

**æƒé™**: å°ç»„æˆå‘˜

**å“åº”**:
```json
{
  "success": true,
  "action": "bookmarked",  // or "unbookmarked"
  "message": "æ”¶è—æˆåŠŸ",
  "isBookmarked": true
}
```

### 3. å¸–å­è¯¦æƒ… (å¢å¼º)
```http
GET /api/study-groups/{groupId}/posts/{postId}
Headers: Authorization: Bearer {token}
```

**æ–°å¢è¿”å›å­—æ®µ**:
```json
{
  "isFeatured": true,
  "viewCount": 123,
  "isBookmarked": false,
  ...
}
```

## ğŸ—‚ï¸ æ•°æ®åº“Schema

### StudyGroupPost (æ›´æ–°)
```prisma
model StudyGroupPost {
  id         String                  @id @default(cuid())
  // ... åŸæœ‰å­—æ®µ ...
  isFeatured Boolean                 @default(false) // â­ï¸ ç²¾åå¸–
  viewCount  Int                     @default(0)     // ğŸ‘ æµè§ˆé‡
  bookmarks  StudyGroupPostBookmark[] // ğŸ“š æ”¶è—å…³ç³»

  @@index([isFeatured])
  @@index([viewCount])
}
```

### StudyGroupPostBookmark (æ–°å¢)
```prisma
model StudyGroupPostBookmark {
  id        String         @id @default(cuid())
  postId    String
  post      StudyGroupPost @relation(fields: [postId], references: [id], onDelete: Cascade)
  userId    String
  user      User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime       @default(now())

  @@unique([postId, userId])
  @@index([postId])
  @@index([userId])
  @@index([createdAt])
}
```

### Badge & UserBadge (æ–°å¢)
```prisma
model Badge {
  id          String      @id @default(cuid())
  code        String      @unique
  name        String
  description String
  icon        String
  category    String      // study, achievement, contribution, special
  rarity      String      @default("common") // common, rare, epic, legendary
  examType    String?
  userBadges  UserBadge[]
}

model UserBadge {
  id          String   @id @default(cuid())
  userId      String
  badgeId     String
  earnedAt    DateTime @default(now())
  isDisplayed Boolean  @default(true)

  @@unique([userId, badgeId])
}
```

### User (æ›´æ–°)
```prisma
model User {
  // ... åŸæœ‰å­—æ®µ ...
  signature             String?                 // âœï¸ ç­¾åæ¡£
  studyGroupPostBookmarks StudyGroupPostBookmark[] // ğŸ“š æ”¶è—
  userBadges            UserBadge[]              // ğŸ… å‹‹ç« 
}
```

## ğŸ“‚ æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶

### APIç«¯ç‚¹
1. âœ… `server/api/study-groups/[id]/posts/[postId]/featured.post.ts` (æ–°å»º)
2. âœ… `server/api/study-groups/[id]/posts/[postId]/bookmark.post.ts` (æ–°å»º)
3. âœ… `server/api/study-groups/[id]/posts.get.ts` (æ›´æ–°)
4. âœ… `server/api/study-groups/[id]/posts/[postId]/index.get.ts` (æ›´æ–°)

### UIç»„ä»¶
5. âœ… `pages/study-groups/[id]/posts/[postId].vue` (æ›´æ–°)
   - ç²¾åæ ‡ç­¾æ˜¾ç¤º
   - ç®¡ç†å‘˜æ“ä½œæŒ‰é’®
   - æ²™å‘/æ¿å‡³/åœ°æ¿æ ‡è¯†
   - æ”¶è—æŒ‰é’®
   - æµè§ˆé‡æ˜¾ç¤º

6. âœ… `components/study-groups/DiscussionsTabBBS.vue` (æ›´æ–°)
   - ç²¾åæ ‡ç­¾
   - æµè§ˆé‡æ˜¾ç¤º

### æ•°æ®åº“
7. âœ… `prisma/schema.prisma` (æ›´æ–°)
   - æ–°å¢å­—æ®µå’Œæ¨¡å‹
   - å…³ç³»å®šä¹‰

### å·¥å…·è„šæœ¬
8. âœ… `scripts/fix-like-counts.ts` (æ–°å»º)
   - ä¿®å¤ç‚¹èµè®¡æ•°ä¸ä¸€è‡´é—®é¢˜

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ç®¡ç†å‘˜è®¾ç½®ç²¾åå¸–
1. ä»¥ç®¡ç†å‘˜/ç‰ˆä¸»èº«ä»½ç™»å½•
2. è¿›å…¥ä»»æ„å¸–å­è¯¦æƒ…é¡µ
3. åœ¨æ ‡é¢˜æ å³ä¾§çœ‹åˆ°"è®¾ä¸ºç²¾å"æŒ‰é’®
4. ç‚¹å‡»å³å¯åˆ‡æ¢ç²¾åçŠ¶æ€

### ç”¨æˆ·æ”¶è—å¸–å­
1. è¿›å…¥å¸–å­è¯¦æƒ…é¡µ
2. åœ¨ç‚¹èµæŒ‰é’®æ—è¾¹çœ‹åˆ°"æ”¶è—"æŒ‰é’®
3. ç‚¹å‡»æ”¶è—ï¼ŒæŒ‰é’®å˜ä¸ºé»„è‰²"å·²æ”¶è—"
4. å†æ¬¡ç‚¹å‡»å–æ¶ˆæ”¶è—

### æŠ¢æ²™å‘
1. åœ¨å¸–å­ä¸‹å¿«é€Ÿå›å¤
2. ç¬¬ä¸€ä¸ªå›å¤è€…è·å¾—"ğŸ›‹ï¸ æ²™å‘"æ ‡è¯†
3. ç¬¬äºŒä¸ªå›å¤è€…è·å¾—"ğŸª‘ æ¿å‡³"æ ‡è¯†
4. ç¬¬ä¸‰ä¸ªå›å¤è€…è·å¾—"ğŸ  åœ°æ¿"æ ‡è¯†

## ğŸ”® ä¸‹ä¸€æ­¥è®¡åˆ’ (å¯é€‰æ‰©å±•)

### ä¼˜å…ˆçº§1: ç­¾åæ¡£åŠŸèƒ½
- [ ] åˆ›å»ºç”¨æˆ·è®¾ç½®API
- [ ] ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µé¢ç¼–è¾‘ç­¾å
- [ ] åœ¨å¸–å­/å›å¤åº•éƒ¨æ˜¾ç¤ºç­¾åæ¡£

### ä¼˜å…ˆçº§2: æˆ‘çš„æ”¶è—é¡µé¢
- [ ] åˆ›å»ºæ”¶è—åˆ—è¡¨API
- [ ] åˆ›å»º"æˆ‘çš„æ”¶è—"é¡µé¢
- [ ] æ”¶è—å¤¹åˆ†ç±»å’Œæœç´¢

### ä¼˜å…ˆçº§3: å‹‹ç« ç³»ç»Ÿ
- [ ] è®¾è®¡åˆå§‹å‹‹ç« åˆ—è¡¨
- [ ] åˆ›å»ºå‹‹ç« æ•°æ®seedè„šæœ¬
- [ ] å®ç°å‹‹ç« æˆäºˆé€»è¾‘
- [ ] åˆ›å»ºå‹‹ç« å±•ç¤ºç»„ä»¶
- [ ] ç”¨æˆ·èµ„æ–™å‹‹ç« å¢™

### ä¼˜å…ˆçº§4: é«˜çº§åŠŸèƒ½
- [ ] ç²¾åå¸–ä¸“åŒº
- [ ] çƒ­é—¨å¸–å­æ’è¡Œ
- [ ] å¸–å­ä¸¾æŠ¥åŠŸèƒ½
- [ ] @æåŠé€šçŸ¥
- [ ] å¸–å­ç¼–è¾‘å†å²

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

1. **æƒé™ç³»ç»Ÿ**: ç²¾ç¡®çš„è§’è‰²æƒé™æ§åˆ¶
2. **å®æ—¶æ›´æ–°**: æµè§ˆé‡è‡ªåŠ¨å¢åŠ 
3. **çŠ¶æ€ç®¡ç†**: å‰ç«¯çŠ¶æ€å³æ—¶åŒæ­¥
4. **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚çš„è§†è§‰åé¦ˆ
5. **BBSæ–‡åŒ–**: ä¼ ç»Ÿè®ºå›å…ƒç´ ç°ä»£åŒ–å‘ˆç°
6. **æ‰©å±•æ€§**: å®Œæ•´çš„æ•°æ®åº“schemaæ”¯æŒæœªæ¥åŠŸèƒ½

## ğŸŠ æˆæœå±•ç¤º

ç›®å‰æ‚¨çš„BBSè®ºå›ç³»ç»Ÿå·²ç»æ‹¥æœ‰ï¼š

âœ… **ç²¾åå¸–** - ç­›é€‰ä¼˜è´¨å†…å®¹
âœ… **æµè§ˆé‡** - æ•°æ®åé¦ˆ
âœ… **æ²™å‘/æ¿å‡³** - è®ºå›æ–‡åŒ–
âœ… **æ”¶è—åŠŸèƒ½** - çŸ¥è¯†ç®¡ç†
âœ… **ç‚¹èµç³»ç»Ÿ** - äº’åŠ¨åé¦ˆ
âœ… **æ¥¼å±‚ç¼–å·** - æ¸…æ™°å¯¼èˆª
âœ… **å¼•ç”¨å›å¤** - å¯¹è¯è¿½æº¯

æ‰€æœ‰åŠŸèƒ½å·²ç»æ•´åˆå®Œæ¯•å¹¶ready for productionï¼ğŸš€
