# CALE考试系统 - 模拟考试功能使用指南

## 📚 系统概述

CALE考试系统现已实现完整的模拟考试功能，包括考试配置、在线答题、实时计时、成绩报告和错题分析等核心功能。

---

## 🎯 核心功能

### 1. 考试配置页面
**访问路径**: `/exam/config`

功能特性：
- ✅ 考试类型选择（CALE/NCCAOM）
- ✅ 考试范围选择
  - 全部领域（完整模拟考试）
  - 单个Domain（针对性练习）
- ✅ 题目数量：20/50/100/150题
- ✅ 考试时长：30/60/90/120分钟
- ✅ 难度选择：简单/中等/困难/混合
- ✅ 题目数量验证（防止题库不足）
- ✅ 实时配置预览

### 2. 答题界面
**访问路径**: `/exam/[examId]`

功能特性：

#### 顶部导航栏
- 考试标题显示
- 当前题号 / 总题数
- 倒计时计时器（时间<5分钟时红色警告）
- 进度条显示

#### 题目显示区
- 清晰的题目内容
- 单选选项（点击选择）
- 标记/收藏功能
- 上一题/下一题导航
- 自动保存答案

#### 答题卡侧边栏
- 网格显示所有题目
- 颜色区分状态：
  - 🟦 蓝色：当前题目
  - 🟩 绿色：已答题目
  - ⬜ 灰色：未答题目
  - 🟡 黄点：已标记
- 点击快速跳转
- 答题统计（已答/未答/已标记）

#### 提交确认
- 显示完成情况
- 未答题目提醒
- 防止误提交

### 3. 成绩报告页面
**访问路径**: `/exam/result/[examId]`

功能特性：

#### 总体成绩
- ✅ 通过/未通过状态（60%及格）
- ✅ 得分百分比
- ✅ 正确/错误题数
- ✅ 考试用时

#### 各领域分析
- 每个Domain的正确率
- 可视化进度条
- 及格/不及格颜色区分

#### 错题详解
- 显示所有答错题目
- 用户答案（红色标注）
- 正确答案（绿色标注）
- 详细答案解析

#### 操作按钮
- 再来一次（返回配置页面）
- 返回首页

---

## 📊 当前题库统计

```
总题目数：91道

各领域分布：
├─ Domain 1: 評估病人 (Patient Assessment)         - 25题
├─ Domain 2: 診斷和治療計劃 (Diagnosis)             - 11题
├─ Domain 3A: 治療 - 針刺選穴 (Acupuncture)         - 10题
├─ Domain 3B: 治療 - 取穴定位與針刺手法 (Technique) - 17题
├─ Domain 3C: 治療 - 輔助治療方式 (Adjunctive)      - 3题
├─ Domain 3D: 治療 - 中藥治療 (Herbal)              - 19题
└─ Domain 5: 專業職責 (Professional)                - 6题

难度分布：
├─ 简单 (Easy): ~30%
├─ 中等 (Medium): ~60%
└─ 困难 (Hard): ~10%
```

---

## 🗄️ 数据库架构

### Exam（考试）
```typescript
{
  id: string              // 考试ID
  userId: string          // 用户ID
  examType: string        // 考试类型 (cale/nccaom)
  title: string           // 考试标题
  categoryId?: string     // 领域ID（null=全部）
  questionCount: number   // 题目数量
  duration: number        // 时长（分钟）
  difficulty: string      // 难度
  status: string          // 状态：not_started/in_progress/completed
  score: number           // 得分
  totalScore: number      // 总分
  percentage: number      // 百分比
  passed: boolean         // 是否通过
  startedAt: DateTime     // 开始时间
  completedAt: DateTime   // 完成时间
  timeSpent: number       // 用时（秒）
}
```

### ExamAnswer（答题记录）
```typescript
{
  id: string              // 记录ID
  examId: string          // 考试ID
  questionId: string      // 题目ID
  userAnswer?: string     // 用户答案
  isCorrect?: boolean     // 是否正确
  timeSpent?: number      // 答题用时（秒）
  isMarked: boolean       // 是否标记
}
```

### WrongQuestion（错题本）
```typescript
{
  id: string              // 记录ID
  userId: string          // 用户ID
  questionId: string      // 题目ID
  wrongCount: number      // 答错次数
  lastWrong: DateTime     // 最后答错时间
  mastered: boolean       // 是否已掌握
  notes?: string          // 个人笔记
}
```

---

## 🚀 使用流程

### 第一步：配置考试
1. 访问 `http://localhost:3001/exam/config`
2. 选择考试类型（CALE）
3. 选择考试范围（全部或特定Domain）
4. 选择题目数量（建议20-50题开始）
5. 选择考试时长（建议30-60分钟）
6. 选择难度（建议混合）
7. 点击"开始考试"

### 第二步：参加考试
1. 仔细阅读题目
2. 点击选项进行选择
3. 使用"标记"功能标记重要题目
4. 使用答题卡快速跳转
5. 注意倒计时，合理分配时间
6. 完成后点击"提交考试"

### 第三步：查看成绩
1. 自动跳转到成绩报告页面
2. 查看总体得分和通过情况
3. 分析各领域得分
4. 仔细阅读错题解析
5. 选择"再来一次"或"返回首页"

---

## 🎓 学习建议

### 初学者（第一次使用）
```
建议配置：
- 题目数量：20题
- 考试时长：30分钟
- 难度：简单
- 范围：单个Domain
```

### 进阶练习
```
建议配置：
- 题目数量：50题
- 考试时长：60分钟
- 难度：混合
- 范围：2-3个Domain
```

### 全真模拟
```
建议配置：
- 题目数量：100-150题
- 考试时长：120分钟
- 难度：混合
- 范围：全部领域
```

---

## 📝 题目示例

### Domain 1 - 患者评估
**题目类型**：四诊合参、辨证论治
```
一位45岁女性患者主诉头痛伴眩晕3个月。
舌红少苔，脉弦细数。
根据四诊合参，最可能的诊断是：

A. 肝阳上亢
B. 气血两虚
C. 肝肾阴虚 ✓
D. 痰浊中阻

解析：舌红少苔提示阴虚，脉弦细数符合肝肾阴虚证候...
```

### Domain 3 - 针灸治疗
**题目类型**：穴位定位、选穴配穴
```
治疗胃痛，根据"腑会中脘"的原则，
应首选的腧穴是：

A. 中脘 ✓
B. 足三里
C. 内关
D. 公孙

解析：中脘为腑会，是治疗六腑病证的要穴...
```

### Domain 5 - 专业职责
**题目类型**：法律法规、职业道德
```
根据加州法律，针灸师的执业范围不包括：

A. 针刺治疗
B. 中药配方
C. 开具西药处方 ✓
D. 推拿按摩

解析：加州针灸师可以进行针灸治疗、配制中药和推拿...
```

---

## 🔧 技术实现

### API端点

#### 创建考试
```
POST /api/exam/create
Body: {
  userId, examType, title, categoryId,
  questionCount, duration, difficulty
}
Response: { success, examId }
```

#### 获取考试
```
GET /api/exam/[id]
Response: { success, exam: {...} }
```

#### 提交答案
```
POST /api/exam/[id]/answer
Body: { answerId, userAnswer, timeSpent, isMarked }
Response: { success, answer: {...} }
```

#### 提交考试
```
POST /api/exam/[id]/submit
Body: { timeSpent }
Response: { success, exam: {...}, results: {...} }
```

### 核心功能

1. **智能选题**：根据范围和难度随机抽取题目
2. **实时保存**：每道题答案自动保存到数据库
3. **倒计时**：自动计算剩余时间，时间到自动提交
4. **自动评分**：提交后自动计算得分和通过情况
5. **错题收集**：错题自动加入错题本

---

## 📈 未来规划

### 短期计划
- [ ] 题库扩充至500+题目
- [ ] 错题本页面和功能
- [ ] 考试历史记录
- [ ] 学习进度追踪

### 中期计划
- [ ] 用户系统（注册/登录）
- [ ] 学习计划管理
- [ ] 知识点标签系统
- [ ] 题目难度自适应

### 长期计划
- [ ] AI智能推荐
- [ ] 社区讨论功能
- [ ] 导师辅导系统
- [ ] 移动端App

---

## ⚠️ 注意事项

1. **用户系统**：当前使用演示用户 `demo-user`，实现用户系统后需替换
2. **题库数量**：当前91道题目，建议根据实际考试题目继续扩充
3. **浏览器兼容**：推荐使用Chrome/Safari/Edge等现代浏览器
4. **网络连接**：答题过程需要网络连接以保存答案
5. **时间管理**：倒计时到0会自动提交，请注意时间分配

---

## 🆘 常见问题

**Q: 考试可以暂停吗？**
A: 当前版本不支持暂停，建议在确保有充足时间的情况下开始考试。

**Q: 答案会自动保存吗？**
A: 是的，每次选择答案后会自动保存到数据库。

**Q: 可以查看历史考试记录吗？**
A: 当前版本暂不支持，计划在下个版本实现。

**Q: 题目会重复吗？**
A: 每次考试都会随机抽取题目，可能出现重复，这也符合真实考试情况。

**Q: 错题会自动收集吗？**
A: 是的，答错的题目会自动加入错题本，方便后续复习。

---

## 📞 技术支持

如有问题或建议，请联系开发团队或在GitHub提交Issue。

---

**最后更新**: 2025-10-19
**版本**: v1.0.0
**作者**: Claude Code
