# ============================================
# Cale 加州中医考试系统 - 生产环境配置示例
# ============================================
#
# 使用说明:
# 1. 复制此文件为 .env.production
# 2. 修改所有标记为 "必须修改" 的配置项
# 3. 永远不要将 .env.production 提交到 Git
#
# ============================================

# ============================================
# 数据库配置 [必须修改]
# ============================================

# PostgreSQL (生产环境推荐)
DATABASE_URL="postgresql://username:password@host:5432/cale_exam?schema=public"

# 或者使用 SQLite (仅用于小规模部署)
# DATABASE_URL="file:./prod.db"

# ============================================
# 应用基础配置
# ============================================

# 运行环境
NODE_ENV="production"

# 应用端口
PORT=3001

# 应用URL [必须修改为你的域名]
APP_URL="https://yourdomain.com"

# ============================================
# 安全配置 [必须修改]
# ============================================

# JWT 密钥 - 用于用户会话加密
# 生成方法: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="your-super-secure-jwt-secret-min-32-chars-long-change-this"

# 管理员密码
ADMIN_PASSWORD="your-secure-admin-password-change-this"

# ============================================
# 邮件配置 (可选 - 用于通知功能)
# ============================================

# SMTP 服务器配置
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-specific-password"

# 发件人信息
MAIL_FROM_NAME="Cale考试系统"
MAIL_FROM_EMAIL="noreply@yourdomain.com"

# ============================================
# Web Push 通知配置 (可选)
# ============================================

# VAPID 密钥
# 生成方法: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
VAPID_SUBJECT="mailto:your-email@gmail.com"

# ============================================
# 第三方服务配置 (可选)
# ============================================

# Sentry 错误追踪
# SENTRY_DSN=""
# SENTRY_ENVIRONMENT="production"

# Google Analytics
# GA_TRACKING_ID="UA-XXXXXXXXX-X"

# ============================================
# 性能和优化配置
# ============================================

# 日志级别: debug, info, warn, error
LOG_LEVEL="info"

# Redis 缓存 (可选)
# REDIS_URL="redis://localhost:6379"
# REDIS_PASSWORD=""

# ============================================
# CORS 配置
# ============================================

# 允许的跨域来源 (多个用逗号分隔)
# ALLOWED_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# ============================================
# 文件上传配置
# ============================================

# 最大文件大小 (字节)
MAX_FILE_SIZE=10485760  # 10MB

# 上传目录
UPLOAD_DIR="./uploads"

# ============================================
# 数据库连接池配置 (PostgreSQL)
# ============================================

# 连接池大小
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# ============================================
# 备份配置
# ============================================

# 自动备份启用
# AUTO_BACKUP_ENABLED=true
# BACKUP_SCHEDULE="0 2 * * *"  # 每天凌晨2点
# BACKUP_RETENTION_DAYS=30

# ============================================
# 功能开关
# ============================================

# 启用注册功能
ENABLE_REGISTRATION=true

# 启用邮件通知
ENABLE_EMAIL_NOTIFICATIONS=false

# 启用 Web Push 通知
ENABLE_PUSH_NOTIFICATIONS=false

# 维护模式
MAINTENANCE_MODE=false
